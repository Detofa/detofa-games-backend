(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4217],{2808:(e,t,s)=>{Promise.resolve().then(s.bind(s,3807))},3807:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var a=s(5155),r=s(6874),o=s.n(r),n=s(2115),i=s(5695);let d=()=>{let[e,t]=(0,n.useState)(""),[s,r]=(0,n.useState)(""),[d,l]=(0,n.useState)(""),[c,u]=(0,n.useState)(!1),h=(0,i.useRouter)(),x=async t=>{t.preventDefault(),l("");try{var a;let t=await fetch("/api/users/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone:e,password:s})}),r=await t.json();if(!t.ok)return void l(r.error||"Login failed");localStorage.setItem("token",r.token),"ADMIN"===r.status||(null==(a=r.status)?void 0:a.endsWith("ADMIN"))?h.push("/dashboard"):h.push("/")}catch(e){l("Login failed. Please try again.")}},p=async()=>{u(!0),l("");try{window.location.href="/api/auth/google"}catch(e){l("Google login failed. Please try again."),u(!1)}},m=()=>{let e=new URLSearchParams(window.location.search),t=e.get("token"),s=e.get("user"),a=e.get("success"),r=e.get("error"),o=e.get("details");if(r)return void l("Google login failed: ".concat(r).concat(o?" - ".concat(o):""));"true"===a&&t&&s&&b(t,s)},b=(e,t)=>{try{var s;let a=JSON.parse(t);localStorage.setItem("token",e),localStorage.setItem("user",t),"ADMIN"===a.status||(null==(s=a.status)?void 0:s.endsWith("ADMIN"))?h.push("/dashboard"):h.push("/")}catch(e){l("Failed to process Google login data")}};return(0,n.useEffect)(()=>{m()},[]),(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("section",{className:"relative z-10 overflow-hidden pt-36 pb-16 md:pb-20 lg:pt-[180px] lg:pb-28",children:[(0,a.jsx)("div",{className:"container",children:(0,a.jsx)("div",{className:"-mx-4 flex flex-wrap",children:(0,a.jsx)("div",{className:"w-full px-4",children:(0,a.jsxs)("div",{className:"shadow-three dark:bg-dark mx-auto max-w-[500px] rounded-sm bg-white px-6 py-10 sm:p-[60px]",children:[(0,a.jsx)("h3",{className:"mb-3 text-center text-2xl font-bold text-black sm:text-3xl dark:text-white",children:"Sign in to your account"}),(0,a.jsx)("p",{className:"text-body-color mb-11 text-center text-base font-medium",children:"Login to your account for a faster checkout."}),d&&(0,a.jsx)("p",{className:"mb-4 text-center text-red-500",children:d}),(0,a.jsxs)("form",{onSubmit:x,children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("label",{htmlFor:"phone",className:"text-dark mb-3 block text-sm dark:text-white",children:"Phone"}),(0,a.jsx)("input",{type:"text",name:"phone",placeholder:"Enter your phone",value:e,onChange:e=>t(e.target.value),className:"border-stroke dark:text-body-color-dark dark:shadow-two text-body-color focus:border-primary dark:focus:border-primary w-full rounded-xs border bg-[#f8f8f8] px-6 py-3 text-base outline-hidden transition-all duration-300 dark:border-transparent dark:bg-[#2C303B] dark:focus:shadow-none"})]}),(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("label",{htmlFor:"password",className:"text-dark mb-3 block text-sm dark:text-white",children:"Password"}),(0,a.jsx)("input",{type:"password",name:"password",placeholder:"Enter your password",value:s,onChange:e=>r(e.target.value),className:"border-stroke dark:text-body-color-dark dark:shadow-two text-body-color focus:border-primary dark:focus:border-primary w-full rounded-xs border bg-[#f8f8f8] px-6 py-3 text-base outline-hidden transition-all duration-300 dark:border-transparent dark:bg-[#2C303B] dark:focus:shadow-none"})]}),(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsx)("button",{type:"submit",className:"shadow-submit dark:shadow-submit-dark bg-primary hover:bg-primary/90 flex w-full items-center justify-center rounded-xs px-9 py-4 text-base font-medium text-white duration-300",children:"Sign in"})})]}),(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsx)("button",{onClick:p,disabled:c,className:"shadow-submit dark:shadow-submit-dark bg-red-600 hover:bg-red-700 disabled:bg-red-400 flex w-full items-center justify-center rounded-xs px-9 py-4 text-base font-medium text-white duration-300",children:c?"Signing in...":"Sign in with Google"})}),(0,a.jsxs)("p",{className:"text-body-color text-center text-base font-medium",children:["Don't you have an account?"," ",(0,a.jsx)(o(),{href:"/signup",className:"text-primary hover:underline",children:"Sign up"})]})]})})})}),(0,a.jsx)("div",{className:"absolute top-0 left-0 z-[-1]",children:(0,a.jsxs)("svg",{width:"1440",height:"969",viewBox:"0 0 1440 969",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("mask",{id:"mask0_95:1005",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"1440",height:"969",children:(0,a.jsx)("rect",{width:"1440",height:"969",fill:"#090E34"})}),(0,a.jsxs)("g",{mask:"url(#mask0_95:1005)",children:[(0,a.jsx)("path",{opacity:"0.1",d:"M1086.96 297.978L632.959 554.978L935.625 535.926L1086.96 297.978Z",fill:"url(#paint0_linear_95:1005)"}),(0,a.jsx)("path",{opacity:"0.1",d:"M1324.5 755.5L1450 687V886.5L1324.5 967.5L-10 288L1324.5 755.5Z",fill:"url(#paint1_linear_95:1005)"})]}),(0,a.jsxs)("defs",{children:[(0,a.jsxs)("linearGradient",{id:"paint0_linear_95:1005",x1:"1178.4",y1:"151.853",x2:"780.959",y2:"453.581",gradientUnits:"userSpaceOnUse",children:[(0,a.jsx)("stop",{stopColor:"#4A6CF7"}),(0,a.jsx)("stop",{offset:"1",stopColor:"#4A6CF7",stopOpacity:"0"})]}),(0,a.jsxs)("linearGradient",{id:"paint1_linear_95:1005",x1:"160.5",y1:"220",x2:"1099.45",y2:"1192.04",gradientUnits:"userSpaceOnUse",children:[(0,a.jsx)("stop",{stopColor:"#4A6CF7"}),(0,a.jsx)("stop",{offset:"1",stopColor:"#4A6CF7",stopOpacity:"0"})]})]})]})})]})})}},5695:(e,t,s)=>{"use strict";var a=s(8999);s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}})}},e=>{var t=t=>e(e.s=t);e.O(0,[6874,8441,1684,7358],()=>t(2808)),_N_E=e.O()}]);