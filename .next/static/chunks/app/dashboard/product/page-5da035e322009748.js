(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1505],{881:(e,t,a)=>{"use strict";a.d(t,{Jd:()=>i,bb:()=>c});var r=a(5155),s=a(1362),l=a(2115);let n=(0,l.createContext)(void 0),o=e=>{let{children:t}=e,[a,s]=(0,l.useState)(null),[o,i]=(0,l.useState)(null);return(0,l.useEffect)(()=>{let e=localStorage.getItem("token");if(e){s(e);try{let t=JSON.parse(atob(e.split(".")[1]));i(t.status||null)}catch(e){i(null)}}},[]),(0,r.jsx)(n.Provider,{value:{token:a,setToken:s,status:o,setStatus:i,isLoggedIn:!!a},children:t})},i=()=>{let e=(0,l.useContext)(n);if(!e)throw Error("useUser must be used within a UserProvider");return e};function c(e){let{children:t}=e;return(0,r.jsx)(s.N,{attribute:"class",children:(0,r.jsx)(o,{children:t})})}},919:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});var r=a(5155),s=a(2115),l=a(881);let n=()=>{let[e,t]=(0,s.useState)([]),[a,n]=(0,s.useState)([]),[o,i]=(0,s.useState)(""),[c,d]=(0,s.useState)(""),[u,m]=(0,s.useState)(""),[h,p]=(0,s.useState)(""),[g,x]=(0,s.useState)(""),[y,b]=(0,s.useState)(""),[f,v]=(0,s.useState)(!1),{token:w}=(0,l.Jd)(),S=async()=>{let e=await fetch("/api/dashboard/product",{headers:w?{Authorization:"Bearer ".concat(w)}:{}}),a=await e.json();t(Array.isArray(a)?a:[])},j=async()=>{let e=await fetch("/api/dashboard/product-category",{headers:w?{Authorization:"Bearer ".concat(w)}:{}}),t=await e.json();n(Array.isArray(t)?t:[])};(0,s.useEffect)(()=>{w&&(S(),j())},[w]);let N=async e=>{e.preventDefault(),b(""),v(!0);try{(await fetch("/api/dashboard/product",{method:"POST",headers:{"Content-Type":"application/json",...w?{Authorization:"Bearer ".concat(w)}:{}},body:JSON.stringify({name:o,price:parseFloat(c),pointprice:parseInt(u,10),categoryId:h,description:g})})).ok?(b("Product created successfully!"),i(""),d(""),m(""),p(""),x(""),await S()):b("Failed to create product")}catch(e){b("Failed to create product")}v(!1)};return(0,r.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"All Products"}),(0,r.jsxs)("form",{onSubmit:N,className:"mb-8 bg-white rounded shadow p-6 flex flex-col gap-4 max-w-xl",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Create Product"}),y&&(0,r.jsx)("p",{className:"text-sm text-green-600",children:y}),(0,r.jsx)("input",{type:"text",placeholder:"Name",value:o,onChange:e=>i(e.target.value),className:"border px-3 py-2 rounded",required:!0}),(0,r.jsx)("input",{type:"number",placeholder:"Price",value:c,onChange:e=>d(e.target.value),className:"border px-3 py-2 rounded",required:!0,min:"0",step:"0.01"}),(0,r.jsx)("input",{type:"number",placeholder:"Point Price",value:u,onChange:e=>m(e.target.value),className:"border px-3 py-2 rounded",required:!0,min:"0",step:"1"}),(0,r.jsxs)("select",{value:h,onChange:e=>p(e.target.value),className:"border px-3 py-2 rounded",required:!0,children:[(0,r.jsx)("option",{value:"",disabled:!0,children:"Select Category"}),a.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,r.jsx)("textarea",{placeholder:"Description (optional)",value:g,onChange:e=>x(e.target.value),className:"border px-3 py-2 rounded",rows:3}),(0,r.jsx)("button",{type:"submit",className:"bg-primary text-white px-4 py-2 rounded mt-2",disabled:f,children:f?"Creating...":"Create Product"})]}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:e.map(e=>{var t;return(0,r.jsxs)("div",{className:"bg-white rounded shadow p-4 flex flex-col items-center",children:[(0,r.jsx)("img",{src:e.images&&e.images.length>0?e.images[0].imageUrl:"/placeholder.png",alt:e.name,className:"w-full h-40 object-cover rounded mb-2"}),(0,r.jsx)("h3",{className:"font-bold text-lg mb-1",children:e.name}),(0,r.jsxs)("p",{className:"text-gray-600 mb-1",children:["$",e.price]}),(0,r.jsxs)("p",{className:"text-blue-600 mb-1",children:["Points: ",e.pointprice]}),(0,r.jsx)("p",{className:"text-gray-500 text-sm mb-1",children:(null==(t=e.category)?void 0:t.name)||e.categoryId}),(0,r.jsx)("p",{className:"text-gray-400 text-xs",children:e.description})]},e.id)})})]})})}},1362:(e,t,a)=>{"use strict";a.d(t,{D:()=>c,N:()=>d});var r=a(2115),s=(e,t,a,r,s,l,n,o)=>{let i=document.documentElement,c=["light","dark"];function d(t){var a;(Array.isArray(e)?e:[e]).forEach(e=>{let a="class"===e,r=a&&l?s.map(e=>l[e]||e):s;a?(i.classList.remove(...r),i.classList.add(l&&l[t]?l[t]:t)):i.setAttribute(e,t)}),a=t,o&&c.includes(a)&&(i.style.colorScheme=a)}if(r)d(r);else try{let e=localStorage.getItem(t)||a,r=n&&"system"===e?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e;d(r)}catch(e){}},l=["light","dark"],n="(prefers-color-scheme: dark)",o=r.createContext(void 0),i={setTheme:e=>{},themes:[]},c=()=>{var e;return null!=(e=r.useContext(o))?e:i},d=e=>r.useContext(o)?r.createElement(r.Fragment,null,e.children):r.createElement(m,{...e}),u=["light","dark"],m=e=>{let{forcedTheme:t,disableTransitionOnChange:a=!1,enableSystem:s=!0,enableColorScheme:i=!0,storageKey:c="theme",themes:d=u,defaultTheme:m=s?"system":"light",attribute:y="data-theme",value:b,children:f,nonce:v,scriptProps:w}=e,[S,j]=r.useState(()=>p(c,m)),[N,C]=r.useState(()=>"system"===S?x():S),E=b?Object.values(b):d,k=r.useCallback(e=>{let t=e;if(!t)return;"system"===e&&s&&(t=x());let r=b?b[t]:t,n=a?g(v):null,o=document.documentElement,c=e=>{"class"===e?(o.classList.remove(...E),r&&o.classList.add(r)):e.startsWith("data-")&&(r?o.setAttribute(e,r):o.removeAttribute(e))};if(Array.isArray(y)?y.forEach(c):c(y),i){let e=l.includes(m)?m:null,a=l.includes(t)?t:e;o.style.colorScheme=a}null==n||n()},[v]),T=r.useCallback(e=>{let t="function"==typeof e?e(S):e;j(t);try{localStorage.setItem(c,t)}catch(e){}},[S]),A=r.useCallback(e=>{C(x(e)),"system"===S&&s&&!t&&k("system")},[S,t]);r.useEffect(()=>{let e=window.matchMedia(n);return e.addListener(A),A(e),()=>e.removeListener(A)},[A]),r.useEffect(()=>{let e=e=>{e.key===c&&(e.newValue?j(e.newValue):T(m))};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[T]),r.useEffect(()=>{k(null!=t?t:S)},[t,S]);let P=r.useMemo(()=>({theme:S,setTheme:T,forcedTheme:t,resolvedTheme:"system"===S?N:S,themes:s?[...d,"system"]:d,systemTheme:s?N:void 0}),[S,T,t,N,s,d]);return r.createElement(o.Provider,{value:P},r.createElement(h,{forcedTheme:t,storageKey:c,attribute:y,enableSystem:s,enableColorScheme:i,defaultTheme:m,value:b,themes:d,nonce:v,scriptProps:w}),f)},h=r.memo(e=>{let{forcedTheme:t,storageKey:a,attribute:l,enableSystem:n,enableColorScheme:o,defaultTheme:i,value:c,themes:d,nonce:u,scriptProps:m}=e,h=JSON.stringify([l,a,i,t,d,c,n,o]).slice(1,-1);return r.createElement("script",{...m,suppressHydrationWarning:!0,nonce:"",dangerouslySetInnerHTML:{__html:"(".concat(s.toString(),")(").concat(h,")")}})}),p=(e,t)=>{let a;try{a=localStorage.getItem(e)||void 0}catch(e){}return a||t},g=e=>{let t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.appendChild(document.createTextNode("*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},x=e=>(e||(e=window.matchMedia(n)),e.matches?"dark":"light")},6868:(e,t,a)=>{Promise.resolve().then(a.bind(a,919))}},e=>{var t=t=>e(e.s=t);e.O(0,[8441,1684,7358],()=>t(6868)),_N_E=e.O()}]);