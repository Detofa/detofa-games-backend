(()=>{var e={};e.id=7798,e.ids=[7798],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},43378:(e,r,s)=>{"use strict";s.r(r),s.d(r,{patchFetch:()=>h,routeModule:()=>c,serverHooks:()=>g,workAsyncStorage:()=>l,workUnitAsyncStorage:()=>x});var t={};s.r(t),s.d(t,{POST:()=>d});var a=s(96559),n=s(48088),i=s(37719),o=s(32190),u=s(85663),p=s(66448);async function d(e){try{let{name:r,email:s,phone:t,password:a,parent:n}=await e.json(),i=[];if(r||i.push("Name is required"),s||i.push("Email is required"),t||i.push("Phone number is required"),a||i.push("Password is required"),i.length>0)return o.NextResponse.json({errors:i},{status:400});if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s))return o.NextResponse.json({error:"Invalid email format"},{status:400});if(await p.A.user.findUnique({where:{phone:t}}))return o.NextResponse.json({error:"Phone number already registered"},{status:400});if(n&&!await p.A.user.findUnique({where:{phone:n}}))return o.NextResponse.json({error:"Parent phone number not found"},{status:400});let d=await u.Ay.hash(a,10),c=await p.A.user.create({data:{name:r,phone:t,email:s,password:d,parent:n||void 0}});return o.NextResponse.json({message:"User registered successfully",user:c},{status:201})}catch(e){return console.error("Registration error:",e),o.NextResponse.json({error:e instanceof Error?e.message:"Registration failed"},{status:400})}}let c=new a.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/users/register/route",pathname:"/api/users/register",filename:"route",bundlePath:"app/api/users/register/route"},resolvedPagePath:"D:\\Detofa\\Game\\detofa-games-backend\\src\\app\\api\\users\\register\\route.ts",nextConfigOutput:"",userland:t}),{workAsyncStorage:l,workUnitAsyncStorage:x,serverHooks:g}=c;function h(){return(0,i.patchFetch)({workAsyncStorage:l,workUnitAsyncStorage:x})}},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},55511:e=>{"use strict";e.exports=require("crypto")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},66448:(e,r,s)=>{"use strict";s.d(r,{A:()=>n});let{PrismaClient:t}=s(96330),a=new t;process.on("beforeExit",async()=>{await a.$disconnect()});let n=a},78335:()=>{},96330:e=>{"use strict";e.exports=require("@prisma/client")},96487:()=>{}};var r=require("../../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[7719,580,5663],()=>s(43378));module.exports=t})();